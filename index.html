<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Global Average Temperature Projections</title>
		<script type="text/javascript" src="node_modules/d3/d3.min.js"></script>
		<script type="text/javascript" src="node_modules/underscore/underscore-min.js"></script>
		<script type="text/javascript" src="node_modules/jquery/dist/jquery.min.js"></script>
		<script type="text/javascript" src="d3_timeseries_scenario_display.js"></script>
		<style type="text/css">
			
			.axis path,
			.axis line {
				fill: none;
				stroke: black;
				shape-rendering: crispEdges;
			}
			
			.axis text {
				font-family: sans-serif;
				font-size: 11px;
			}

      path.a1b {
        stroke: #0000CC;
        stroke-width: 3;
        fill: none;
      }

    path.a2 {
        stroke: #CCCC00;
        stroke-width: 3;
        fill: none;
      }

    path.cmip5_historical_line {
        stroke: #000000;
        stroke-width: 3;
        fill: none;
      }

    path.cmip5_historical_fill {
        stroke-width: 1;
        fill: #AAAAAA;
      }

    path.proj_line {
        stroke: #00FFFF;
        stroke-width: 3;
        fill: none;
      }

    path.proj_fill {
        stroke-width: 1;
        fill: #00AAAA;
        opacity: 0.5;
      }

    path.rcp26_line {
        stroke: #00FFFF;
        stroke-width: 3;
        fill: none;
      }

    path.rcp26_fill {
        stroke-width: 1;
        fill: #00AAAA;
        opacity: 0.5;
      }

    path.rcp85_line {
        stroke: #FF0000;
        stroke-width: 3;
        fill: none;
      }

    path.rcp85_fill {
        stroke-width: 1;
        fill: #AA0000;
        opacity: 0.5;
      }

    #plot_scenarios {
      width: 1000px;
      height: 400px;
    }

		</style>
	</head>
	<body>
      <center><h2>Global Average Temperature Projections</h2></center>
      <div style="position: relative">

        <div id="plot_scenarios"></div>

        <div style="position: absolute; top: 60px; left: 90px;">
          <input type="radio" name="proj" id="proj_rcp85"><label for="proj_rcp85">RCP 8.5</label>
          <p/>
          <input type="radio" name="proj" id="proj_rcp26" checked="checked"><label for="proj_rcp26">RCP 2.6</label>
        </div>

        <div>
          <hr>
          <b>provided image:</b><br>
          <img src="GlobalAvgTempProjections.png">
          <hr>
          <b>image generated by Andrew's code:</b><br>
          <img src="scenarios_comparison.png">
          <script type="text/javascript">
(function() {
            $.ajax({
                type: 'GET',
                contentType: 'application/json',
                url: './data/data.json',
                success: function(data) {
                    setup(data);
                },
                error: function(jqXHR, textStatus, e) {
                    console.log('parse error in data.json');
                    console.log(textStatus);
                    console.log(e);
                }
            });

        function setup(data) {
            $('#plot_scenarios').d3_timeseries_scenario_display({
                "x_title" : "Year",
                "y_title" : "Average Global Temperature Change (Â°F)",
                "series" : [
                  {
                    "type" : "area",
                   "class" : "cmip5_historical_fill",
                    "data" : _.map(data.cmip5_historical.data, function(r) { return [r[0],r[2],r[3]]; })
                  },
                  {
                    "type" : "line",
                   "class" : "cmip5_historical_line",
                    "data" : _.map(data.cmip5_historical.data, function(r) { return [r[0],r[1]]; })
                  },
                  {
                    "type" : "area",
                   "class" : "proj_fill",
                  "states" : {
                                 "rcp26" : {
                                     "data" : _.map(data.rcp26_projections.data, function(r) { return [r[0],r[2],r[3]]; }),
                                     "fill" : "#00AAAA",
                                   "stroke" : undefined
                                 },
                                 "rcp85" : {
                                     "data" : _.map(data.rcp85_projections.data, function(r) { return [r[0],r[2],r[3]]; }),
                                     "fill" : "#AA0000",
                                   "stroke" : undefined
                                 }
                              },
                     "default_state" : "rcp26"
                    },

                  {
                    "type" : "line",
                   "class" : "proj_line",
                  "states" : {
                                 "rcp26" : {
                                     "data" : _.map(data.rcp26_projections.data, function(r) { return [r[0],r[1]]; }),
                                     "fill" : undefined,
                                   "stroke" : "#00FFFF"
                                 },
                                 "rcp85" : {
                                     "data" : _.map(data.rcp85_projections.data, function(r) { return [r[0],r[1]]; }),
                                     "fill" : undefined,
                                   "stroke" : "#FF0000"
                                 }
                              },
                     "default_state" : "rcp26"
                    }

                ]
            });


            $('#proj_rcp85').click(function() {
                $('#plot_scenarios').d3_timeseries_scenario_display('transition_to_state', 'rcp85');
            });
            $('#proj_rcp26').click(function() {
                $('#plot_scenarios').d3_timeseries_scenario_display('transition_to_state', 'rcp26');
            });

        }

}());

          </script>
	</body>
</html>
